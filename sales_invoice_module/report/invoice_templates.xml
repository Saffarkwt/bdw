<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- English Sales Invoice Template -->
    <template id="report_sales_invoice_english">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
                    
                    <div class="page" style="font-size: 16px;">
                        <!-- Header with Logo and Company Info -->
                        <div class="row mb-1">
                            <div class="col-6">
                                <img src="/sales_invoice_module/static/description/blue_diamond_logo.png" style="max-height: 70px;" t-if="o.company_id.logo"/>
                                <h3 style="margin-top: 10px;">BLUE DIAMOND</h3>
                            </div>
                            <div class="col-6 text-right">
                                <h3 style="margin-bottom: 0;">Blue Diamond الماسة الزرقاء</h3>
                                <p style="margin-bottom: 0;">بيع - شراء - تثمين الساعات الثمينة</p>
                            </div>
                        </div>
                        
                        <hr style="margin-top: 5px; margin-bottom: 15px;"/>
                        
                        <!-- Customer Information and Barcode -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <!-- Left side intentionally left empty -->
                            </div>
                            <div class="col-6 text-right">
                                <strong>Name : </strong><span t-field="o.partner_id"/><br/>
                                <strong>Phone : </strong><span t-field="o.partner_id.phone"/><br/>
                                <strong>Civil ID : </strong><span t-field="o.partner_id.email"/>
                            </div>
                        </div>
                        
                        <!-- Barcode section moved below customer info -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <img t-att-src="'/report/barcode/Code128/'+o.name" style="width:300px;height:50px;"/>
                                <h3 class="mt-1 mb-0">Sales Invoice</h3>
                                <h4 class="mt-0 mb-1" t-field="o.name"/>
                            </div>
                            <div class="col-6">
                                <!-- Right side intentionally left empty -->
                            </div>
                        </div>
                        
                        <!-- Invoice Information -->
                        <div class="row mb-1">
                            <div class="col-4">
                                <strong>Invoice Date:</strong>
                                <p class="m-0" t-field="o.invoice_date"/>
                            </div>
                            <div class="col-4 text-center">
                                <strong>Created By:</strong>
                                <p class="m-0" t-field="o.user_id"/>
                            </div>
                            <div class="col-4 text-right">
                                <strong>Source:</strong>
                                <p class="m-0" t-field="o.invoice_origin"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Lines Table - Improved formatting -->
                        <table class="table table-sm table-bordered mb-1" style="font-size: 14px;">
                            <thead style="background-color: #f8f9fa;">
                                <tr>
                                    <th class="text-left" style="width: 5%;">Sr no.</th>
                                    <th class="text-left" style="width: 35%;">Description</th>
                                    <th class="text-left" style="width: 15%;">Serial No</th>
                                    <th class="text-left" style="width: 15%;">Model No</th>
                                    <th class="text-right" style="width: 15%;">Quantity</th>
                                    <th class="text-right" style="width: 15%;">Unite price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="current_total" t-value="0"/>
                                <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <t t-set="sr_no" t-value="0"/>
                                
                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                    <t t-set="current_total" t-value="current_total + line.price_total"/>
                                    
                                    <tr t-att-class="'fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="line.display_type == 'product'" name="account_invoice_line_accountable">
                                            <td name="account_invoice_line_number">
                                                <t t-set="sr_no" t-value="sr_no+1"/>
                                                <span t-esc="sr_no"/>
                                            </td>
                                            <td name="account_invoice_line_name">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.barcode"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.default_code"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.quantity"/>
                                                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.price_unit"/>
                                            </td>
                                        </t>
                                        <t t-elif="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <t t-set="current_section" t-value="line"/>
                                            <t t-set="current_subtotal" t-value="0"/>
                                        </t>
                                        <t t-elif="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                    </tr>
                                    
                                    <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                        <tr class="is-subtotal text-end">
                                            <td colspan="99">
                                                <strong class="mr16">Subtotal</strong>
                                                <span t-out="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                        </table>
                        
                        <!-- Totals - Aligned to right -->
                        <div class="row mb-1">
                            <div class="col-6">
                                <!-- Intentionally left empty for layout balance -->
                            </div>
                            <div class="col-6">
                                <table class="table table-sm table-bordered mb-1" style="page-break-inside: avoid; font-size: 14px;">
                                    <tr>
                                        <td class="text-right" style="width: 70%;"><strong>Untaxed Amount</strong></td>
                                        <td class="text-right" style="width: 30%;">
                                            <span t-field="o.amount_untaxed"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #f8f9fa;">
                                        <td class="text-right"><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_total"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                </table>
                                <p class="text-right mb-1" style="font-size: 14px;">
                                    <strong>Total Amount: </strong>
                                    <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                </p>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div class="mb-1" style="font-size: 14px;">
                            <p class="mb-0">Please use the following communication for your payment : <span t-field="o.name"/></p>
                            <strong>TERMS &amp; CONDITIONS</strong>
                            <p class="mb-0">1. Goods once sold are not subject to return or exchange</p>
                            <p class="mb-0">2. Checking period is for two days from the date of the purchase</p>
                            <p class="mb-0">3. There is no guarantee of the authenticity or the quality of the watch or parts after checking two days periods from the date of purchase.</p>
                            <p class="mb-0">I received and examined the goods along with its sets, and I am aware of their condition, and I do not have the right to claim for any refund or whats so ever in the event of a defect after the examination period. In the end, the appreciation is due to the "Blue Diamond" decision accordance with the laws and regulations in force in Kuwait for non-refundable watches, jewelry and gold.</p>
                            
                            <p class="text-right mb-0">
                                <strong>الشروط والاحكام</strong>
                            </p>
                            <p class="text-right mb-0">
                                1. البضاعة المباعة لاترد ولاتستبدل
                            </p>
                            <p class="text-right mb-0">
                                2. مدة الفحص يومين من تاريخ الشراء
                            </p>
                            <p class="text-right mb-0">
                                3. لا يوجد ضمان باصلية أو جودة البضاعة بعد مدة الفحص يومين من تاريخ الشراء
                            </p>
                            <p class="text-right mb-0">
                                استلمت وعاينت البضاعة وملحقاتها وعلمي بحالتها ولا يحق لي الرجوع بمطالبة استردادها في حال وجود عيب بعد مدة الفحص. ويرجع التقدير للماسة الزرقاء وفقا للقوانين واللوائح المعمولة بالكويت للساعات والمجوهرات والذهب الغير قابلة للرد
                            </p>
                        </div>
                        
                        <!-- Signature -->
                        <div class="row">
                            <div class="col-12 text-right">
                                <p class="mb-0">
                                    <strong>Name</strong>
                                </p>
                                <p class="mb-0">
                                    <strong>Signature</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- Arabic Sales Invoice Template -->
    <template id="report_sales_invoice_arabic">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
                    
                    <div class="page" style="font-size: 16px; direction: rtl;">
                        <!-- Header with Logo and Company Info -->
                        <div class="row mb-1">
                            <div class="col-6 text-right">
                                <h3 style="margin-bottom: 0;">الماسة الزرقاء Blue Diamond</h3>
                                <p style="margin-bottom: 0;">بيع - شراء - تثمين الساعات الثمينة</p>
                            </div>
                            <div class="col-6">
                                <img src="/sales_invoice_module/static/description/blue_diamond_logo.png" style="max-height: 70px;" t-if="o.company_id.logo"/>
                                <h3 style="margin-top: 10px; text-align: right;">BLUE DIAMOND</h3>
                            </div>
                        </div>
                        
                        <hr style="margin-top: 5px; margin-bottom: 15px;"/>
                        
                        <!-- Customer Information and Barcode -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <!-- Left side intentionally left empty -->
                            </div>
                            <div class="col-6 text-right">
                                <strong>الاسم : </strong><span t-field="o.partner_id"/><br/>
                                <strong>الهاتف : </strong><span t-field="o.partner_id.phone"/><br/>
                                <strong>الرقم المدني : </strong><span t-field="o.partner_id.email"/>
                            </div>
                        </div>
                        
                        <!-- Barcode section moved below customer info -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <!-- Left side intentionally left empty -->
                            </div>
                            <div class="col-6 text-right">
                                <img t-att-src="'/report/barcode/Code128/'+o.name" style="width:300px;height:50px;"/>
                                <h3 class="mt-1 mb-0">فاتورة مبيعات</h3>
                                <h4 class="mt-0 mb-1" t-field="o.name"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Information -->
                        <div class="row mb-1">
                            <div class="col-4 text-right">
                                <strong>المصدر:</strong>
                                <p class="m-0" t-field="o.invoice_origin"/>
                            </div>
                            <div class="col-4 text-center">
                                <strong>أنشئت بواسطة:</strong>
                                <p class="m-0" t-field="o.user_id"/>
                            </div>
                            <div class="col-4 text-right">
                                <strong>تاريخ الفاتورة:</strong>
                                <p class="m-0" t-field="o.invoice_date"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Lines Table - Improved formatting -->
                        <table class="table table-sm table-bordered mb-1" style="font-size: 14px;">
                            <thead style="background-color: #f8f9fa;">
                                <tr>
                                    <th class="text-right" style="width: 15%;">سعر الوحدة</th>
                                    <th class="text-right" style="width: 15%;">الكمية</th>
                                    <th class="text-right" style="width: 15%;">رقم الموديل</th>
                                    <th class="text-right" style="width: 15%;">الرقم التسلسلي</th>
                                    <th class="text-right" style="width: 35%;">الوصف</th>
                                    <th class="text-right" style="width: 5%;">الرقم</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="current_total" t-value="0"/>
                                <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <t t-set="sr_no" t-value="0"/>
                                
                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                    <t t-set="current_total" t-value="current_total + line.price_total"/>
                                    
                                    <tr t-att-class="'fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="line.display_type == 'product'" name="account_invoice_line_accountable">
                                            <td class="text-right">
                                                <span t-field="line.price_unit"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.quantity"/>
                                                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.default_code"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.barcode"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <td class="text-right">
                                                <t t-set="sr_no" t-value="sr_no+1"/>
                                                <span t-esc="sr_no"/>
                                            </td>
                                        </t>
                                        <t t-elif="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <t t-set="current_section" t-value="line"/>
                                            <t t-set="current_subtotal" t-value="0"/>
                                        </t>
                                        <t t-elif="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                    </tr>
                                    
                                    <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                        <tr class="is-subtotal text-end">
                                            <td colspan="99">
                                                <strong class="mr16">المجموع الفرعي</strong>
                                                <span t-out="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                        </table>
                        
                        <!-- Totals - Aligned to right -->
                        <div class="row mb-1">
                            <div class="col-6">
                                <p class="text-right mb-1" style="font-size: 14px;">
                                    <strong>المبلغ الإجمالي: </strong>
                                    <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                </p>
                            </div>
                            <div class="col-6">
                                <table class="table table-sm table-bordered mb-1" style="page-break-inside: avoid; font-size: 14px;">
                                    <tr>
                                        <td class="text-right" style="width: 30%;">
                                            <span t-field="o.amount_untaxed"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                        <td class="text-right" style="width: 70%;"><strong>المبلغ قبل الضريبة</strong></td>
                                    </tr>
                                    <tr style="background-color: #f8f9fa;">
                                        <td class="text-right">
                                            <span t-field="o.amount_total"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                        <td class="text-right"><strong>الإجمالي</strong></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div class="mb-1" style="font-size: 14px;">
                            <p class="text-right mb-0">يرجى استخدام المرجع التالي للدفع : <span t-field="o.name"/></p>
                            
                            <p class="text-right mb-0">
                                <strong>الشروط والاحكام</strong>
                            </p>
                            <p class="text-right mb-0">
                                1. البضاعة المباعة لاترد ولاتستبدل
                            </p>
                            <p class="text-right mb-0">
                                2. مدة الفحص يومين من تاريخ الشراء
                            </p>
                            <p class="text-right mb-0">
                                3. لا يوجد ضمان باصلية أو جودة البضاعة بعد مدة الفحص يومين من تاريخ الشراء
                            </p>
                            <p class="text-right mb-0">
                                استلمت وعاينت البضاعة وملحقاتها وعلمي بحالتها ولا يحق لي الرجوع بمطالبة استردادها في حال وجود عيب بعد مدة الفحص. ويرجع التقدير للماسة الزرقاء وفقا للقوانين واللوائح المعمولة بالكويت للساعات والمجوهرات والذهب الغير قابلة للرد
                            </p>
                            
                            <strong>TERMS &amp; CONDITIONS</strong>
                            <p class="mb-0">1. Goods once sold are not subject to return or exchange</p>
                            <p class="mb-0">2. Checking period is for two days from the date of the purchase</p>
                            <p class="mb-0">3. There is no guarantee of the authenticity or the quality of the watch or parts after checking two days periods from the date of purchase.</p>
                            <p class="mb-0">I received and examined the goods along with its sets, and I am aware of their condition, and I do not have the right to claim for any refund or whats so ever in the event of a defect after the examination period. In the end, the appreciation is due to the "Blue Diamond" decision accordance with the laws and regulations in force in Kuwait for non-refundable watches, jewelry and gold.</p>
                        </div>
                        
                        <!-- Signature -->
                        <div class="row">
                            <div class="col-12 text-right">
                                <p class="mb-0">
                                    <strong>الاسم</strong>
                                </p>
                                <p class="mb-0">
                                    <strong>التوقيع</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- English Purchase Invoice Template -->
    <template id="report_purchase_invoice_english">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
                    
                    <div class="page" style="font-size: 16px;">
                        <!-- Header with Logo and Company Info -->
                        <div class="row mb-1">
                            <div class="col-6">
                                <img src="/sales_invoice_module/static/description/blue_diamond_logo.png" style="max-height: 70px;" t-if="o.company_id.logo"/>
                                <h3 style="margin-top: 10px;">BLUE DIAMOND</h3>
                            </div>
                            <div class="col-6 text-right">
                                <h3 style="margin-bottom: 0;">Blue Diamond الماسة الزرقاء</h3>
                                <p style="margin-bottom: 0;">بيع - شراء - تثمين الساعات الثمينة</p>
                            </div>
                        </div>
                        
                        <hr style="margin-top: 5px; margin-bottom: 15px;"/>
                        
                        <!-- Vendor Information and Barcode -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <!-- Left side intentionally left empty -->
                            </div>
                            <div class="col-6 text-right">
                                <strong>Name : </strong><span t-field="o.partner_id"/><br/>
                                <strong>Phone : </strong><span t-field="o.partner_id.phone"/><br/>
                                <strong>Civil ID : </strong><span t-field="o.partner_id.email"/>
                            </div>
                        </div>
                        
                        <!-- Barcode section moved below vendor info -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <img t-att-src="'/report/barcode/Code128/'+o.name" style="width:300px;height:50px;"/>
                                <h3 class="mt-1 mb-0">Purchase Invoice</h3>
                                <h4 class="mt-0 mb-1" t-field="o.name"/>
                            </div>
                            <div class="col-6">
                                <!-- Right side intentionally left empty -->
                            </div>
                        </div>
                        
                        <!-- Invoice Information -->
                        <div class="row mb-1">
                            <div class="col-4">
                                <strong>Invoice Date:</strong>
                                <p class="m-0" t-field="o.invoice_date"/>
                            </div>
                            <div class="col-4 text-center">
                                <strong>Created By:</strong>
                                <p class="m-0" t-field="o.user_id"/>
                            </div>
                            <div class="col-4 text-right">
                                <strong>Source:</strong>
                                <p class="m-0" t-field="o.invoice_origin"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Lines Table - Improved formatting -->
                        <table class="table table-sm table-bordered mb-1" style="font-size: 14px;">
                            <thead style="background-color: #f8f9fa;">
                                <tr>
                                    <th class="text-left" style="width: 5%;">Sr no.</th>
                                    <th class="text-left" style="width: 40%;">Description</th>
                                    <th class="text-left" style="width: 20%;">Serial No</th>
                                    <th class="text-left" style="width: 20%;">Model No</th>
                                    <th class="text-right" style="width: 15%;">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="current_total" t-value="0"/>
                                <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <t t-set="sr_no" t-value="0"/>
                                
                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                    <t t-set="current_total" t-value="current_total + line.price_total"/>
                                    
                                    <tr t-att-class="'fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="line.display_type == 'product'" name="account_invoice_line_accountable">
                                            <td name="account_invoice_line_number">
                                                <t t-set="sr_no" t-value="sr_no+1"/>
                                                <span t-esc="sr_no"/>
                                            </td>
                                            <td name="account_invoice_line_name">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.barcode"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.default_code"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.quantity"/>
                                                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                        </t>
                                        <t t-elif="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <t t-set="current_section" t-value="line"/>
                                            <t t-set="current_subtotal" t-value="0"/>
                                        </t>
                                        <t t-elif="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                    </tr>
                                    
                                    <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                        <tr class="is-subtotal text-end">
                                            <td colspan="99">
                                                <strong class="mr16">Subtotal</strong>
                                                <span t-out="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                        </table>
                        
                        <!-- Totals - Aligned to right -->
                        <div class="row mb-1">
                            <div class="col-6">
                                <!-- Intentionally left empty for layout balance -->
                            </div>
                            <div class="col-6">
                                <table class="table table-sm table-bordered mb-1" style="page-break-inside: avoid; font-size: 14px;">
                                    <tr>
                                        <td class="text-right" style="width: 70%;"><strong>Untaxed Amount</strong></td>
                                        <td class="text-right" style="width: 30%;">
                                            <span t-field="o.amount_untaxed"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                    <tr style="background-color: #f8f9fa;">
                                        <td class="text-right"><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_total"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                </table>
                                <p class="text-right mb-1" style="font-size: 14px;">
                                    <strong>Total Amount: </strong>
                                    <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                </p>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div class="mb-1" style="font-size: 14px;">
                            <p class="mb-0">Please use the following communication for your payment : <span t-field="o.name"/></p>
                            <strong>TERMS &amp; CONDITIONS</strong>
                            <p class="mb-0">• Based on receipt sing by customer with his name written agreeing on the following:</p>
                            <p class="mb-0">I Above-mentioned, declare that the items sold belong to me and it's not been stolen or its</p>
                            <p class="mb-0">• inauthentic, and I have received amount paid in full, and don't have any rights to take the items</p>
                            <p class="mb-0">back after I sell…Additionally I will take full responsibilities in case of violation in complying with</p>
                            <p class="mb-0">rules, laws, and regulation etc. in State of Kuwait. Moreover, I promise to return amount in full</p>
                            <p class="mb-0">whether items sold is fake (inauthentic) or in custody due to it was stolen, which is resulted of</p>
                            <p class="mb-0">my fault in the end.</p>
                            
                            <p class="text-right mb-0">
                                <strong>الشروط والاحكام</strong>
                            </p>
                            <p class="text-right mb-0">
                                اقر انا البائع المذكور اسمي اعلاه بان القطع المباعة من قبلي عائد لي وملكي وليس مسروق أو مقلد واستلمت القيمة بالكامل
                            </p>
                            <p class="text-right mb-0">
                                ولا يحق لي استرجاع ماهو مباع مرة أخرى وأتحمل المسئولية الكاملة تجاه الجهات الرسمية أو الجهات القانونية في حال
                            </p>
                            <p class="text-right mb-0">
                                ثبوت عكس ذلك او مخالفة الشروط القانونية والجزائية في دولة الكويت. واتعهد برد القيمة كاملة اذا كانت القطعة المباعة
                            </p>
                            <p class="text-right mb-0">
                                مقلدة أو غير اصلية، أو مسروقة أو يوجد فيها عيب أو خلل.
                            </p>
                        </div>
                        
                        <!-- Signature -->
                        <div class="row">
                            <div class="col-12 text-right">
                                <p class="mb-0">
                                    <strong>Name</strong>
                                </p>
                                <p class="mb-0">
                                    <strong>Signature</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- Arabic Purchase Invoice Template -->
    <template id="report_purchase_invoice_arabic">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
                    
                    <div class="page" style="font-size: 16px; direction: rtl;">
                        <!-- Header with Logo and Company Info -->
                        <div class="row mb-1">
                            <div class="col-6 text-right">
                                <h3 style="margin-bottom: 0;">الماسة الزرقاء Blue Diamond</h3>
                                <p style="margin-bottom: 0;">بيع - شراء - تثمين الساعات الثمينة</p>
                            </div>
                            <div class="col-6">
                                <img src="/sales_invoice_module/static/description/blue_diamond_logo.png" style="max-height: 70px;" t-if="o.company_id.logo"/>
                                <h3 style="margin-top: 10px; text-align: right;">BLUE DIAMOND</h3>
                            </div>
                        </div>
                        
                        <hr style="margin-top: 5px; margin-bottom: 15px;"/>
                        
                        <!-- Vendor Information and Barcode -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <!-- Left side intentionally left empty -->
                            </div>
                            <div class="col-6 text-right">
                                <strong>الاسم : </strong><span t-field="o.partner_id"/><br/>
                                <strong>الهاتف : </strong><span t-field="o.partner_id.phone"/><br/>
                                <strong>الرقم المدني : </strong><span t-field="o.partner_id.email"/>
                            </div>
                        </div>
                        
                        <!-- Barcode section moved below vendor info -->
                        <div class="row mb-3">
                            <div class="col-6">
                                <!-- Left side intentionally left empty -->
                            </div>
                            <div class="col-6 text-right">
                                <img t-att-src="'/report/barcode/Code128/'+o.name" style="width:300px;height:50px;"/>
                                <h3 class="mt-1 mb-0">فاتورة مشتريات</h3>
                                <h4 class="mt-0 mb-1" t-field="o.name"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Information -->
                        <div class="row mb-1">
                            <div class="col-4 text-right">
                                <strong>المصدر:</strong>
                                <p class="m-0" t-field="o.invoice_origin"/>
                            </div>
                            <div class="col-4 text-center">
                                <strong>أنشئت بواسطة:</strong>
                                <p class="m-0" t-field="o.user_id"/>
                            </div>
                            <div class="col-4 text-right">
                                <strong>تاريخ الفاتورة:</strong>
                                <p class="m-0" t-field="o.invoice_date"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Lines Table - Improved formatting -->
                        <table class="table table-sm table-bordered mb-1" style="font-size: 14px;">
                            <thead style="background-color: #f8f9fa;">
                                <tr>
                                    <th class="text-right" style="width: 15%;">الكمية</th>
                                    <th class="text-right" style="width: 20%;">رقم الموديل</th>
                                    <th class="text-right" style="width: 20%;">الرقم التسلسلي</th>
                                    <th class="text-right" style="width: 40%;">الوصف</th>
                                    <th class="text-right" style="width: 5%;">الرقم</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="current_total" t-value="0"/>
                                <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <t t-set="sr_no" t-value="0"/>
                                
                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"/>
                                    <t t-set="current_total" t-value="current_total + line.price_total"/>
                                    
                                    <tr t-att-class="'fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="line.display_type == 'product'" name="account_invoice_line_accountable">
                                            <td class="text-right">
                                                <span t-field="line.quantity"/>
                                                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.default_code"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.barcode"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <td class="text-right">
                                                <t t-set="sr_no" t-value="sr_no+1"/>
                                                <span t-esc="sr_no"/>
                                            </td>
                                        </t>
                                        <t t-elif="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <t t-set="current_section" t-value="line"/>
                                            <t t-set="current_subtotal" t-value="0"/>
                                        </t>
                                        <t t-elif="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                    </tr>
                                    
                                    <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                        <tr class="is-subtotal text-end">
                                            <td colspan="99">
                                                <strong class="mr16">المجموع الفرعي</strong>
                                                <span t-out="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                        </table>
                        
                        <!-- Totals - Aligned to right -->
                        <div class="row mb-1">
                            <div class="col-6">
                                <p class="text-right mb-1" style="font-size: 14px;">
                                    <strong>المبلغ الإجمالي: </strong>
                                    <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                </p>
                            </div>
                            <div class="col-6">
                                <table class="table table-sm table-bordered mb-1" style="page-break-inside: avoid; font-size: 14px;">
                                    <tr>
                                        <td class="text-right" style="width: 30%;">
                                            <span t-field="o.amount_untaxed"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                        <td class="text-right" style="width: 70%;"><strong>المبلغ قبل الضريبة</strong></td>
                                    </tr>
                                    <tr style="background-color: #f8f9fa;">
                                        <td class="text-right">
                                            <span t-field="o.amount_total"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                        <td class="text-right"><strong>الإجمالي</strong></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div class="mb-1" style="font-size: 14px;">
                            <p class="text-right mb-0">يرجى استخدام المرجع التالي للدفع : <span t-field="o.name"/></p>
                            
                            <p class="text-right mb-0">
                                <strong>الشروط والاحكام</strong>
                            </p>
                            <p class="text-right mb-0">
                                اقر انا البائع المذكور اسمي اعلاه بان القطع المباعة من قبلي عائد لي وملكي وليس مسروق أو مقلد واستلمت القيمة بالكامل
                            </p>
                            <p class="text-right mb-0">
                                ولا يحق لي استرجاع ماهو مباع مرة أخرى وأتحمل المسئولية الكاملة تجاه الجهات الرسمية أو الجهات القانونية في حال
                            </p>
                            <p class="text-right mb-0">
                                ثبوت عكس ذلك او مخالفة الشروط القانونية والجزائية في دولة الكويت. واتعهد برد القيمة كاملة اذا كانت القطعة المباعة
                            </p>
                            <p class="text-right mb-0">
                                مقلدة أو غير اصلية، أو مسروقة أو يوجد فيها عيب أو خلل.
                            </p>
                            
                            <strong>TERMS &amp; CONDITIONS</strong>
                            <p class="mb-0">• Based on receipt sing by customer with his name written agreeing on the following:</p>
                            <p class="mb-0">I Above-mentioned, declare that the items sold belong to me and it's not been stolen or its</p>
                            <p class="mb-0">• inauthentic, and I have received amount paid in full, and don't have any rights to take the items</p>
                            <p class="mb-0">back after I sell…Additionally I will take full responsibilities in case of violation in complying with</p>
                            <p class="mb-0">rules, laws, and regulation etc. in State of Kuwait. Moreover, I promise to return amount in full</p>
                            <p class="mb-0">whether items sold is fake (inauthentic) or in custody due to it was stolen, which is resulted of</p>
                            <p class="mb-0">my fault in the end.</p>
                        </div>
                        
                        <!-- Signature -->
                        <div class="row">
                            <div class="col-12 text-right">
                                <p class="mb-0">
                                    <strong>الاسم</strong>
                                </p>
                                <p class="mb-0">
                                    <strong>التوقيع</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
