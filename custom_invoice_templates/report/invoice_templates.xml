<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Sales Invoice Template -->
    <template id="report_sales_invoice_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
                    
                    <div class="page" style="font-size: 14px;">
                        <!-- Header with Logo and Company Info -->
                        <div class="row">
                            <div class="col-6">
                                <img src="/custom_invoice_templates/static/description/blue_diamond_logo.png" style="max-height: 80px;" t-if="o.company_id.logo"/>
                            </div>
                            <div class="col-6 text-right">
                                <h3>Blue Diamond الماسة الزرقاء</h3>
                                <p style="margin-bottom: 0px;">بيع - شراء - تثمين الساعات الثمينة</p>
                            </div>
                        </div>
                        
                        <hr style="margin-top: 10px; margin-bottom: 15px;"/>
                        
                        <!-- Customer Information -->
                        <div class="row">
                            <div class="col-6">
                                <!-- Intentionally left empty for layout balance -->
                            </div>
                            <div class="col-6 text-right">
                                <strong>Name : </strong><span t-field="o.partner_id.name"/><br/>
                                <strong>Phone : </strong><span t-field="o.partner_id.phone"/><br/>
                                <strong>Civil ID : </strong><span t-field="o.partner_id.email"/>
                            </div>
                        </div>
                        
                        <!-- Barcode and Invoice Title -->
                        <div class="row mt-4">
                            <div class="col-12 text-center">
                                <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)" style="width:350px;height:60px;"/>
                                <h2 class="mt-2">Sales Invoice</h2>
                                <h4 t-field="o.name"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Information -->
                        <div class="row mt-3">
                            <div class="col-4">
                                <strong>Invoice Date:</strong>
                                <p class="m-0" t-field="o.invoice_date"/>
                            </div>
                            <div class="col-4">
                                <strong>Created By:</strong>
                                <p class="m-0">Team</p>
                            </div>
                            <div class="col-4">
                                <strong>Source:</strong>
                                <p class="m-0" t-field="o.invoice_origin"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Lines Table -->
                        <table class="table table-sm mt-4" style="font-size: 13px;">
                            <thead>
                                <tr>
                                    <th class="text-left">Sr no.</th>
                                    <th class="text-left">Description</th>
                                    <th class="text-right">Serial No</th>
                                    <th class="text-right">Model No</th>
                                    <th class="text-right">Quantity</th>
                                    <th class="text-right">Unite price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <t t-set="sr_no" t-value="0"/>
                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                    
                                    <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                            <td>
                                                <t t-set="sr_no" t-value="sr_no+1"/>
                                                <span t-esc="sr_no"/>
                                            </td>
                                            <td>
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.barcode"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.default_code"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.quantity"/>
                                                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.price_unit"/>
                                            </td>
                                        </t>
                                        <t t-if="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                        <t t-if="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        
                        <!-- Totals -->
                        <div class="row">
                            <div class="col-6">
                                <!-- Intentionally left empty for layout balance -->
                            </div>
                            <div class="col-6">
                                <table class="table table-sm" style="page-break-inside: avoid;">
                                    <tr>
                                        <td><strong>Untaxed Amount</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_untaxed"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_total"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                </table>
                                <p class="text-right">
                                    <strong>Total Amount: </strong>
                                    <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                </p>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div class="mt-4" style="font-size: 12px;">
                            <strong>TERMS &amp; CONDITIONS</strong>
                            <p>Based on receipt signed by customer with his name written agreeing on the following:</p>
                            <p>I above-mentioned, declare that the items sold belong to me and it's not been stolen or its inauthentic, and I have received amount paid in full, and don't have any rights to take the items back after I sell... Additionally I will take full responsibilities in case of violation in complying with rules, laws, and regulation etc. in State of Kuwait. Moreover, I promise to return amount in full whether items sold is fake (inauthentic) or in custody due to it was stolen, which is resulted of my fault in the end.</p>
                            
                            <p class="text-right">
                                <strong>الشروط والاحكام</strong>
                            </p>
                            <p class="text-right">
                                اقر انا البائع المذكور اسمي اعلاه بان القطع المباعة من قبلي عائد لي وملكي وليس مسروق أو مقلد واستلمت القيمة بالكامل ولا يحق لي استرجاع ماهو مباع مرة أخرى وأتحمل المسئولية الكاملة تجاه الجهات الرسمية أو الجهات القانونية في حال ثبوت عكس ذلك او مخالفة الشروط القانونية والجزائية في دولة الكويت. واتعهد برد القيمة كاملة اذا كانت القطعة المباعة مقلدة أو غير اصلية، أو مسروقة أو يوجد فيها عيب أو خلل.
                            </p>
                        </div>
                        
                        <!-- Signature -->
                        <div class="row mt-4">
                            <div class="col-12 text-right">
                                <p>
                                    <strong>الاسم</strong>
                                </p>
                                <br/>
                                <p>
                                    <strong>التوقيع</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <template id="report_sales_invoice">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-if="o.move_type == 'out_invoice'">
                    <t t-call="custom_invoice_templates.report_sales_invoice_document" t-lang="o.partner_id.lang"/>
                </t>
            </t>
        </t>
    </template>
</odoo>

<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Purchase Invoice Template -->
    <template id="report_purchase_invoice_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat" t-value="o.fiscal_position_id.foreign_vat"/>
                    
                    <div class="page" style="font-size: 14px;">
                        <!-- Header with Logo and Company Info -->
                        <div class="row">
                            <div class="col-6">
                                <img src="/custom_invoice_templates/static/description/blue_diamond_logo.png" style="max-height: 80px;" t-if="o.company_id.logo"/>
                            </div>
                            <div class="col-6 text-right">
                                <h3>Blue Diamond الماسة الزرقاء</h3>
                                <p style="margin-bottom: 0px;">بيع - شراء - تثمين الساعات الثمينة</p>
                            </div>
                        </div>
                        
                        <hr style="margin-top: 10px; margin-bottom: 15px;"/>
                        
                        <!-- Customer Information -->
                        <div class="row">
                            <div class="col-6">
                                <!-- Intentionally left empty for layout balance -->
                            </div>
                            <div class="col-6 text-right">
                                <strong>Name : </strong><span t-field="o.partner_id.name"/><br/>
                                <strong>Phone : </strong><span t-field="o.partner_id.phone"/><br/>
                                <strong>Civil ID : </strong><span t-field="o.partner_id.email"/>
                            </div>
                        </div>
                        
                        <!-- Barcode and Invoice Title -->
                        <div class="row mt-4">
                            <div class="col-12 text-center">
                                <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 100)" style="width:350px;height:60px;"/>
                                <h2 class="mt-2">Purchase Invoice</h2>
                                <h4 t-field="o.name"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Information -->
                        <div class="row mt-3">
                            <div class="col-4">
                                <strong>Invoice Date:</strong>
                                <p class="m-0" t-field="o.invoice_date"/>
                            </div>
                            <div class="col-4">
                                <strong>Created By:</strong>
                                <p class="m-0">Team</p>
                            </div>
                            <div class="col-4">
                                <strong>Source:</strong>
                                <p class="m-0" t-field="o.invoice_origin"/>
                            </div>
                        </div>
                        
                        <!-- Invoice Lines Table -->
                        <table class="table table-sm mt-4" style="font-size: 13px;">
                            <thead>
                                <tr>
                                    <th class="text-left">Sr no.</th>
                                    <th class="text-left">Description</th>
                                    <th class="text-right">Serial No</th>
                                    <th class="text-right">Model No</th>
                                    <th class="text-right">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="current_subtotal" t-value="0"/>
                                <t t-set="lines" t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <t t-set="sr_no" t-value="0"/>
                                <t t-foreach="lines" t-as="line">
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                    <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                    
                                    <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                        <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                            <td>
                                                <t t-set="sr_no" t-value="sr_no+1"/>
                                                <span t-esc="sr_no"/>
                                            </td>
                                            <td>
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.barcode"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.product_id.default_code"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="line.quantity"/>
                                                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                            </td>
                                        </t>
                                        <t t-if="line.display_type == 'line_section'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                        <t t-if="line.display_type == 'line_note'">
                                            <td colspan="99">
                                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        
                        <!-- Totals -->
                        <div class="row">
                            <div class="col-6">
                                <!-- Intentionally left empty for layout balance -->
                            </div>
                            <div class="col-6">
                                <table class="table table-sm" style="page-break-inside: avoid;">
                                    <tr>
                                        <td><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_total"/> <span t-field="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                </table>
                                <p class="text-right">
                                    <strong>Total Amount: </strong>
                                    <span t-esc="o.currency_id.amount_to_text(o.amount_total)"/>
                                </p>
                            </div>
                        </div>
                        
                        <!-- Terms and Conditions -->
                        <div class="mt-4" style="font-size: 12px;">
                            <strong>TERMS &amp; CONDITIONS</strong>
                            <p>Based on receipt sing by customer with his name written agreeing on the following:</p>
                            <p>I Above-mentioned, declare that the items sold belong to me and it's not been stolen or its inauthentic, and I have received amount paid in full, and don't have any rights to take the items back after I sell… Additionally I will take full responsibilities in case of violation in complying with rules, laws, and regulation etc. in State of Kuwait. Moreover, I promise to return amount in full whether items sold is fake (inauthentic) or in custody due to it was stolen, which is resulted of my fault in the end.</p>
                            
                            <p class="text-right">
                                <strong>الشروط والاحكام</strong>
                            </p>
                            <p class="text-right">
                                اقر انا البائع المذكور اسمي اعلاه بان القطع المباعة من قبلي عائد لي وملكي وليس مسروق أو مقلد واستلمت القيمة بالكامل ولا يحق لي استرجاع ماهو مباع مرة أخرى وأتحمل المسئولية الكاملة تجاه الجهات الرسمية أو الجهات القانونية في حال ثبوت عكس ذلك او مخالفة الشروط القانونية والجزائية في دولة الكويت. واتعهد برد القيمة كاملة اذا كانت القطعة المباعة مقلدة أو غير اصلية، أو مسروقة أو يوجد فيها عيب أو خلل.
                            </p>
                        </div>
                        
                        <!-- Signature -->
                        <div class="row mt-4">
                            <div class="col-12 text-right">
                                <p>
                                    <strong>الاسم</strong>
                                </p>
                                <br/>
                                <p>
                                    <strong>التوقيع</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <template id="report_purchase_invoice">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-if="o.move_type == 'in_invoice'">
                    <t t-call="custom_invoice_templates.report_purchase_invoice_document" t-lang="o.partner_id.lang"/>
                </t>
            </t>
        </t>
    </template>
</odoo>
