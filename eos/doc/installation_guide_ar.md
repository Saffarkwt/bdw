# دليل التثبيت والتكوين - مودويل نهاية الخدمة (EOS)

## متطلبات النظام
- Odoo 17.0
- وحدة الموارد البشرية مثبتة
- وحدة المحاسبة مثبتة (اختياري، للتكامل المحاسبي)

## خطوات التثبيت

### التثبيت اليدوي
1. قم بتنزيل المودويل
2. استخرج المودويل إلى دليل إضافات Odoo الخاص بك
3. قم بتحديث قائمة المودويلات في Odoo
4. قم بتثبيت مودويل "نهاية الخدمة"

### التثبيت باستخدام Git
```bash
cd /path/to/odoo/addons
git clone https://github.com/your-repository/eos.git
```

ثم قم بتحديث قائمة المودويلات في Odoo وتثبيت مودويل "نهاية الخدمة".

## التكوين الأولي

### إعداد النظام
1. انتقل إلى نهاية الخدمة > الإعدادات > إعدادات نهاية الخدمة
2. قم بتكوين الإعدادات الافتراضية لحسابات نهاية الخدمة:
   - عدد الأيام الافتراضي في السنة: 30 (قابل للتعديل)
   - عدد الأيام الافتراضي في الشهر: 30 (قابل للتعديل)
   - حساب مصروفات نهاية الخدمة (إذا كان التكامل المحاسبي مفعلاً)
   - حساب مستحقات نهاية الخدمة (إذا كان التكامل المحاسبي مفعلاً)
   - دفتر اليومية لنهاية الخدمة (إذا كان التكامل المحاسبي مفعلاً)

### إعداد أسباب إنهاء الخدمة
1. انتقل إلى نهاية الخدمة > الإعدادات > أسباب إنهاء الخدمة
2. راجع وعدل أسباب إنهاء الخدمة المحددة مسبقاً:
   - الاستقالة (أقل من 3 سنوات)
   - الاستقالة (3-5 سنوات)
   - الاستقالة (5-10 سنوات)
   - الاستقالة (أكثر من 10 سنوات)
   - إنهاء الخدمة خلال فترة التجربة
   - إنهاء الخدمة (أقل من 5 سنوات)
   - إنهاء الخدمة (أكثر من 5 سنوات)
   - السحب الجزئي لمكافأة نهاية الخدمة

3. لكل سبب، تأكد من صحة طريقة الحساب وصيغ الحساب المرتبطة به.

### إعداد طرق الدفع
1. انتقل إلى نهاية الخدمة > الإعدادات > طرق الدفع
2. راجع وعدل طرق الدفع المحددة مسبقاً:
   - نقداً
   - شيك
   - تحويل بنكي

### إعداد صلاحيات المستخدمين
1. انتقل إلى الإعدادات > المستخدمون والشركات > المستخدمون
2. حدد المستخدم الذي تريد منحه صلاحيات نهاية الخدمة
3. انتقل إلى علامة التبويب "الوصول الفني"
4. قم بتعيين المستخدم إلى إحدى المجموعات التالية:
   - مستخدم نهاية الخدمة: للموظفين الذين يحتاجون إلى إنشاء وعرض طلبات نهاية الخدمة الخاصة بهم
   - مدير نهاية الخدمة: للمديرين الذين يحتاجون إلى إدارة جميع طلبات نهاية الخدمة والموافقة عليها وتكوين المودويل

## التكامل مع الوحدات الأخرى

### التكامل مع وحدة الموارد البشرية
يتكامل مودويل نهاية الخدمة بشكل كامل مع وحدة الموارد البشرية:
- يستخدم بيانات الموظفين وعقودهم لحساب مكافأة نهاية الخدمة
- يضيف علامة تبويب "نهاية الخدمة" إلى نموذج عقد الموظف
- يضيف زر "طلبات نهاية الخدمة" إلى نموذج الموظف

### التكامل مع وحدة المحاسبة (اختياري)
إذا كانت وحدة المحاسبة مثبتة، يمكن تكوين مودويل نهاية الخدمة لإنشاء قيود محاسبية تلقائية:
1. انتقل إلى نهاية الخدمة > الإعدادات > إعدادات نهاية الخدمة
2. قم بتكوين الحسابات ودفتر اليومية لنهاية الخدمة
3. عند دفع طلب نهاية الخدمة، سيتم إنشاء قيد محاسبي تلقائياً

## الصيانة والتحديث

### النسخ الاحتياطي
قبل تحديث المودويل، يوصى بإنشاء نسخة احتياطية لقاعدة البيانات:
```bash
pg_dump -U odoo_user -d odoo_database > eos_backup.sql
```

### التحديث
لتحديث المودويل:
1. قم بتنزيل أحدث إصدار من المودويل
2. استبدل الملفات الموجودة بالملفات الجديدة
3. قم بتحديث المودويل من واجهة Odoo

## استكشاف الأخطاء وإصلاحها

### مشاكل التثبيت
- تأكد من توافق إصدار المودويل مع إصدار Odoo الخاص بك
- تحقق من تثبيت جميع التبعيات المطلوبة
- راجع سجلات Odoo للحصول على رسائل الخطأ المحددة

### مشاكل التكوين
- تأكد من تكوين جميع الإعدادات المطلوبة
- تحقق من صحة صيغ الحساب لأسباب إنهاء الخدمة
- تأكد من تعيين الصلاحيات المناسبة للمستخدمين

### مشاكل الحساب
- تأكد من صحة بيانات عقود الموظفين
- تحقق من تكوين أسباب إنهاء الخدمة وصيغ الحساب
- راجع قانون العمل الكويتي للتأكد من صحة الحسابات

## الدعم الفني
للحصول على الدعم الفني أو طلبات التخصيص، يرجى التواصل مع فريق التطوير.
